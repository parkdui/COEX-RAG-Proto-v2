@tailwind base;
@tailwind components;
@tailwind utilities;

/*
Copyright (c) 2021 Kil Hyung-jin, with Reserved Font Name Pretendard.
https://github.com/orioncactus/pretendard

This Font Software is licensed under the SIL Open Font License, Version 1.1.
This license is copied below, and is also available with a FAQ at:
http://scripts.sil.org/OFL
*/

@font-face {
	font-family: 'Pretendard Variable';
	font-weight: 45 920;
	font-style: normal;
	font-display: swap;
	src: url('/fonts/woff2/PretendardVariable.woff2') format('woff2-variations');
}

:root {
  --background: #0a0a0a;
  --foreground: #ededed;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: 'Pretendard Variable', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
}

/* 모바일 최적화 */
@layer utilities {
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .overscroll-contain {
    overscroll-behavior: contain;
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Gradient Animation */
  @keyframes gradient-rotate {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .animate-gradient {
    background: linear-gradient(
      -45deg,
      #E987FE,
      #FFE68A,
      #C629FF,
      #E987FE
    );
    background-size: 400% 400%;
    animation: gradient-rotate 15s ease infinite;
  }
  
  /* Highlight Rotate Animation */
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  /* Text Pressure Loop Animation */
  @keyframes textPressureLoop {
    0%, 100% {
      font-weight: 700;
      transform: scale(1);
    }
    50% {
      font-weight: 300;
      transform: scale(0.95);
    }
  }
  
  /* 스크롤바 숨김 */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

/* 모바일에서 스크롤 개선 */
@media (max-width: 768px) {
  html {
    -webkit-overflow-scrolling: touch;
  }
  
  body {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  /* iOS Safari에서 키보드 올라올 때 레이아웃 깨짐 방지 */
  .min-h-screen {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* 모바일에서 버튼 터치 피드백 개선 */
@media (hover: none) and (pointer: coarse) {
  button:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
}

/* 모바일에서 입력 필드 포커스 개선 */
@media (max-width: 768px) {
  input:focus {
    font-size: 16px; /* iOS에서 줌 방지 */
  }
}

/* 랜딩 페이지 및 온보딩 페이지 모바일 최적화 */
@media (max-width: 768px) {
  .min-h-screen {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  /* 터치 영역 최적화 */
  button {
    min-height: 44px; /* iOS 권장 터치 영역 */
    min-width: 44px;
  }
  
  /* 그라데이션 성능 최적화 */
  .bg-gradient-to-b,
  .bg-gradient-to-br,
  .bg-gradient-to-r {
    will-change: auto;
  }
  
  /* 스크롤 개선 */
  .overscroll-contain {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }
  
  /* 하단 고정 레이아웃 강화 */
  .bottom-fixed-area {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 20;
    background: inherit;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  /* 메인 페이지 하단 입력 영역 최적화 */
  .main-input-area {
    position: sticky;
    bottom: 0;
    z-index: 20;
    background: rgba(31, 41, 55, 0.95); /* 다크 모드용 */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-top: 1px solid rgba(75, 85, 99, 0.3);
  }
  
  /* 라이트 모드용 메인 입력 영역 */
  .light-mode .main-input-area {
    background: rgba(255, 255, 255, 0.95);
    border-top: 1px solid rgba(229, 231, 235, 0.3);
  }
  
  /* 하단 여백 추가 (iOS 홈 인디케이터 고려) */
  .safe-bottom {
    padding-bottom: calc(env(safe-area-inset-bottom) + 1rem);
  }
  
  /* 화면 하단 고정 버튼 영역 */
  .fixed-bottom-button {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 30;
    background: linear-gradient(to top, rgba(255, 255, 255, 0.9), transparent);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
}
